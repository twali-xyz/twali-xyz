(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{54444:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[userName]",function(){return t(72278)}])},72278:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return De}});var r=t(85893),a=t(68527),o=t(11163),i=t(34051),l=t.n(i),s=t(34651),c=t(86541),u=t(67294),p={isAllowedTo:function(){return Promise.resolve(!1)}},d=u.createContext(p),f=function(e){var n=(0,u.useState)(!0),t=n[0],r=n[1],a=(0,u.useState)(),o=a[0],i=a[1];return(0,(0,u.useContext)(d).isAllowedTo)(e).then((function(e){r(!1),i(e)})),[t,o]};function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var n=e.to,t=e.fallback,a=e.loadingComponent,o=e.children,i=x(f(n),2),l=i[0],s=i[1];return l?(0,r.jsx)(r.Fragment,{children:a}):s?(0,r.jsx)(r.Fragment,{children:o}):(0,r.jsx)(r.Fragment,{children:t})},g=t(30135),y=function(e){var n=e.badge,t=(0,u.useRef)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.u_,{finalFocusRef:t,isOpen:e.isOpen,onClose:e.onClose,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsxs)(g.hz,{backgroundColor:"#041A19",fontFamily:"PP Telegraf Light",children:[(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{alignSelf:"center",children:(0,r.jsx)(a.gC,{spacing:6,padding:10,children:n&&"snapshot"==n.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.X6,{children:n.spaceID}),(0,r.jsx)(s.Ei,{borderRadius:"full",width:"150px",src:n.avatar,alt:"fox stock img"},n.spaceID),(0,r.jsxs)("div",{children:["you have ",n.walletVotes," vote(s) at ",n.spaceID,"!"]}),(0,r.jsxs)("div",{children:[n.walletVotes,"/",n.totalVotes]})]}):n&&"poap"==n.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.X6,{children:n.event.name}),(0,r.jsx)(s.Ei,{borderRadius:"full",width:"150px",src:n.event.image_url,alt:"fox stock img"},n.tokenId),(0,r.jsxs)("div",{children:["you collected this POAP on ",n.event.start_date,"!"]})]}):null})})]})]})})};function v(e){var n=e.poapsData,t=e.snapshotData,o=e.setCurrentBadge,i=e.onBadgesModalOpen,l=e.isBadgesModalOpen,u=e.onBadgesModalClose,p=e.currentBadge,d=[];return n&&n.length>0&&n.forEach((function(e){e.type="poap",d.push(e)})),t&&t.length>0&&t.forEach((function(e){e.type="snapshot",d.push(e)})),(0,r.jsxs)(a.xu,{alignSelf:"flex-start",w:"full",overflow:"hidden",mb:"40px !important",children:[(0,r.jsx)(h,{to:"view",children:(0,r.jsx)(a.xv,{fontSize:"32px",lineHeight:"48px",letterSpacing:"wide",fontFamily:"GrandSlang",mb:4,children:"Badges"})}),(0,r.jsxs)(h,{to:"edit",children:[(0,r.jsx)(a.xv,{fontSize:"32px",lineHeight:"48px",letterSpacing:"wide",fontFamily:"GrandSlang",mb:(null===d||void 0===d?void 0:d.length)?4:"unset",children:"Badges"}),!(null===d||void 0===d?void 0:d.length)&&(0,r.jsx)(a.xv,{fontSize:"16px",color:"#98B2B2",mt:4,mb:8,lineHeight:"24px",letterSpacing:"wide",fontFamily:"PP Telegraf Light",children:"The badges you earn participating in web3 will appear below"})]}),d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Ug,{spacing:4,maxW:"640px",display:"flex",flexWrap:"wrap",justifyContent:[(null===d||void 0===d?void 0:d.length)<6?"unset":"space-between"],children:(null===d||void 0===d?void 0:d.length)?(0,r.jsx)(r.Fragment,{children:null===d||void 0===d?void 0:d.map((function(e,n){return(0,r.jsx)(r.Fragment,{children:"snapshot"==e.type?(0,r.jsx)(s.Ei,{marginLeft:["0 !important",0===n||n>=6?"0px":"32px !important"],marginBottom:["0 !important",n>=6?"0px":"32px !important"],style:{cursor:"pointer"},borderRadius:"full",width:"80px",src:e.avatar,alt:"snapshot".concat(e.spaceID),onClick:function(){o(e),i()}},e.spaceID):"poap"==e.type?(0,r.jsx)(s.Ei,{marginLeft:["0 !important",0===n||n>=6?"0px":"32px !important"],marginBottom:["0 !important",n>=6?"0px":"32px !important"],style:{cursor:"pointer"},borderRadius:"full",width:"80px",src:e.event.image_url,alt:"poap".concat(e.tokenId),onClick:function(){o(e),i()}},e.tokenId):null})}))}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{to:"view",children:(0,r.jsx)(c.u,{margin:0,backgroundColor:"#F9FFF2",color:"#0A1313",label:"Badges earned participating in web3 will appear here",children:(0,r.jsx)(s.Ei,{borderRadius:"full",style:{cursor:"pointer"},backgroundColor:"transparent",width:"80px",src:"twali-assets/questionmark.png",alt:"add img"})})}),(0,r.jsx)(h,{to:"edit",children:(0,r.jsx)(s.Ei,{borderRadius:"full",style:{cursor:"pointer"},backgroundColor:"transparent",width:"80px",src:"twali-assets/questionmark.png",alt:"add img"})})]})}),(0,r.jsx)(y,{badge:p,isOpen:l,onClose:u})]}):null]})}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){j(e,n,t[n])}))}return e}function w(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function C(e){var n=e.text,t=w(e,["text"]);return(0,r.jsx)(a.xu,b({borderRadius:"32px",backgroundImage:"linear-gradient(#0DD5D1 0%, #9350B3 100%)",p:"1px"},t,{children:(0,r.jsx)(a.xv,b({fontSize:"14px",lineHeight:"24px",fontFamily:"PP Telegraf",alignSelf:"start",backgroundColor:"#0A2625",p:"4px 12px",borderRadius:"32px",whiteSpace:"nowrap"},t.fontProps,{children:n}))}))}var S=t(79762),P=t(4612),E=t(11391),I=t(15193),k=t(38152),N=t(8100),F=t(67679),D=t(39715),O=t(79769);function T(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){T(o,r,a,i,l,"next",e)}function l(e){T(o,r,a,i,l,"throw",e)}i(void 0)}))}}function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){W(e,n,t[n])}))}return e}function B(e){var n,t,o;if(console.log(e),e.shouldFetch){var i,l={params:e.companyName},c=new URLSearchParams(l);c.sort();var u=c.toString(),p=(0,N.ZP)("/api/cors?".concat(u),(function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return fetch(e).then((function(e){return e.json()}))})).data;return p?(e.isDisabled(!1),e.setlogo(p)):(e.isDisabled(!1),e.setlogo(!0)),(0,r.jsx)(r.Fragment,{children:p&&(null===p||void 0===p?void 0:p.message)&&(null===p||void 0===p||null===(i=p.message)||void 0===i?void 0:i.logo)?(0,r.jsx)(a.xu,{w:"full",borderRadius:"lg",overflow:"hidden",p:2,children:(0,r.jsx)(s.Ei,{height:"48px",src:p.message.logo,alt:p.message.domain})}):e.companyName?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{companyName:e.companyName})}):null})}return(0,r.jsx)(r.Fragment,{children:e.logo&&(null===(n=e.logo)||void 0===n?void 0:n.message)&&(null===(t=e.logo)||void 0===t||null===(o=t.message)||void 0===o?void 0:o.logo)?(0,r.jsx)(a.xu,{w:"full",borderRadius:"lg",overflow:"hidden",p:2,children:(0,r.jsx)(s.Ei,{height:"48px",src:e.logo.message.logo,alt:e.logo.message.domain})}):""!==e.companyName&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{companyName:e.companyName})})})}function R(e){var n;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.xu,{w:"full",borderRadius:"lg",overflow:"hidden",p:2,children:(0,r.jsx)(a.xu,{w:"1.75rem",h:"1.75rem",justifyContent:"center",alignItems:"center",bgGradient:"linear-gradient(to right, #d1913c, #ffd194)",borderRadius:"50%",children:(0,r.jsx)(a.xv,{w:"full",h:"full",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"xl",fontFamily:"GrandSlang",fontWeight:"800",color:"blue.700",children:null===(n=e.companyName[0])||void 0===n?void 0:n.toUpperCase()})})})})}var L=function(e){var n,t,o,i,c,p,d,f,m,x=(0,u.useRef)(),y=(0,u.useState)(0),v=(y[0],y[1],(0,u.useState)(!1)),j=v[0],b=v[1],w=(0,u.useState)(!1),N=w[0],T=w[1],L=(0,u.useState)({}),q=L[0],A=L[1],M=(0,u.useState)(),H=M[0],V=M[1],_=(0,u.useState)(!1),Y=_[0],X=_[1],$=(0,u.useState)(e.userData),G=$[0],Z=($[1],{companyName:"",companyTitle:"",companyStart:"",companyEnd:"",companyFunc:"",companyIndustry:"",companyLogo:!1}),J=(0,u.useState)(),Q=J[0],K=J[1];(0,u.useEffect)((function(){var n,t;if(e.isOpen)return K(e.userData.companyInfo&&e.userData.companyInfo[e.currCompany]?e.userData.companyInfo[e.currCompany]:Z),(null===(n=e.userData)||void 0===n?void 0:n.companyInfo[e.currCompany])&&V(null===(t=e.userData)||void 0===t?void 0:t.companyInfo[e.currCompany].logo),function(){};V(!1)}),[e.isOpen]);var ee,ne=(0,u.useState)({companyName:null,companyTitle:null,companyStart:null,companyEnd:null,companyFunction:null,companyIndustry:null}),te=ne[0],re=ne[1];function ae(){return(ae=z(l().mark((function n(){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,F.$j)();case 2:n.sent&&(b(!0),G.userWallet&&G.userName&&Q?(G.companyInfo[e.currCompany]=Q,console.log(Q),(t={companyData:G.companyInfo,userName:G.userName,currCompany:e.currCompany}).companyData[e.currCompany].logo=H,oe(G.userWallet,t),e.handleUpdatedCompanyInfo(e.userData,!1),e.onClose(),V(!1),A(Z),T(!1),b(!1),window.location.reload()):console.log("No profile, pls create one..."));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Q&&Q.companyStart&&Q.companyEnd&&(ee=function(e,n){var t={year:"numeric",month:"long",day:"numeric"},r=new Date(e).toLocaleDateString(void 0,t),a=new Date(n).toLocaleDateString(void 0,t);return"".concat(r," - ").concat(a)}(Q.companyStart,Q.companyEnd));var oe=function(){var e=z(l().mark((function e(n,t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={userWallet:n,attributes:t},e.next=3,fetch("/api/users/updateUser?updateUser=company",{method:"PUT",body:JSON.stringify({userData:r})});case 3:console.log("USER Company data UPDATED BRUH");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ie=function(e){e.persist(),K(U({},Q,W({},e.target.name,e.target.value))),A(U({},Q,W({},e.target.name,e.target.value))),re(le(q)),"companyName"==e.target.name&&T(!0)},le=function(e){var n={};e.companyName||(n.companyName="Company name is required"),e.companyTitle||(n.companyTitle="Job title is required");var t=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return e.companyStart||(n.companyStart="Start date (DD-MM-YYYY) is required"),e.companyStart&&!t.test(e.companyStart)&&(n.companyStart="Start date (DD-MM-YYYY) is incorrect"),e.companyEnd||(n.companyEnd="End date (DD-MM-YYYY) is required"),e.companyEnd&&!t.test(e.companyEnd)&&(n.companyEnd="End date (DD-MM-YYYY) is incorrect"),""===e.companyFunc&&(n.companyFunc="Functional expertise is required"),""===e.companyIndustry&&(n.companyIndustry="Industry expertise is required"),n},se=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.hz,{backgroundColor:"#041A19",fontFamily:"PP Telegraf Light",children:[(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{children:(0,r.jsx)(a.gC,{spacing:6,padding:10,children:Q?(0,r.jsxs)(r.Fragment,{children:[Q.companyName?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.X6,{fontWeight:"500",textTransform:"capitalize",children:Q.companyName})}):null,Q.companyTitle?(0,r.jsx)(a.xv,{fontSize:"2xl",children:Q.companyTitle}):null,Q.companyStart&&Q.companyEnd?(0,r.jsx)(a.xv,{fontSize:"md",color:"gray.500",children:ee}):null,Q.companyFunc&&Q.companyIndustry?(0,r.jsx)(a.Ug,{spacing:4,display:"flex",alignContent:"baseline",children:[Q.companyFunc,Q.companyIndustry].map((function(e,n){return(0,r.jsx)(C,{text:e,name:e,idx:n},"expertChip--".concat(e,"-").concat(n))}))}):null]}):null})})]})});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.u_,{finalFocusRef:x,isOpen:e.isOpen,onClose:function(){e.onClose(),V(!1),T(!1),A(Z)},children:[(0,r.jsx)(g.ZA,{}),(0,r.jsx)(g.hz,{backgroundColor:"#041A19",fontFamily:"PP Telegraf",children:(0,r.jsxs)(h,{to:"edit",fallback:se,children:[(0,r.jsx)(g.xB,{pb:0,children:"Update your work experience"}),(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{fontSize:"14px",lineHeight:"24px",fontWeight:"400",children:Q?(0,r.jsxs)("form",{style:{alignSelf:"center"},children:[(0,r.jsxs)(S.NI,{p:2,id:"company-name",children:[N?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(B,{companyName:Q.companyName,isDisabled:function(e){X(e)},logo:H,setlogo:V,shouldFetch:N})}):(null===H||void 0===H||null===(n=H.message)||void 0===n?void 0:n.logo)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.xu,{w:"full",borderRadius:"lg",overflow:"hidden",p:2,children:(0,r.jsx)(s.Ei,{height:"48px",src:null===H||void 0===H||null===(t=H.message)||void 0===t?void 0:t.logo,alt:null===H||void 0===H||null===(o=H.message)||void 0===o?void 0:o.domain})})}):!H&&(null===(i=Q.logo)||void 0===i||null===(c=i.message)||void 0===c?void 0:c.logo)?(0,r.jsx)(a.xu,{w:"full",borderRadius:"lg",overflow:"hidden",p:2,children:(0,r.jsx)(s.Ei,{height:"48px",src:null===(p=Q.logo)||void 0===p||null===(d=p.message)||void 0===d?void 0:d.logo,alt:null===(f=Q.logo)||void 0===f||null===(m=f.message)||void 0===m?void 0:m.domain})}):(Q.companyName||H)&&N&&Q.companyName?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{companyName:Q.companyName})}):N||H||!Q.companyName?!N&&H&&Q.companyName?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{companyName:Q.companyName})}):null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R,{companyName:Q.companyName})}),(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"Company name"}),(0,r.jsx)(P.II,{fontFamily:"PP Telegraf Light",required:!0,isInvalid:te.companyName&&(!Q.companyName||!q.companyName),errorBorderColor:"red.300",placeholder:"Company name",name:"companyName",defaultValue:Q.companyName||"",onChange:ie}),te.companyName&&(!Q.companyName||!q.companyName)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:te.companyName})]}),(0,r.jsxs)(S.NI,{p:2,id:"company-title",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"Job title"}),(0,r.jsx)(P.II,{fontFamily:"PP Telegraf Light",required:!0,isInvalid:te.companyTitle&&(!Q.companyTitle||!q.companyTitle),errorBorderColor:"red.300",placeholder:"Job title",name:"companyTitle",defaultValue:Q.companyTitle||"",onChange:ie}),te.companyTitle&&(!Q.companyTitle||!q.companyTitle)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:te.companyTitle})]}),(0,r.jsxs)(S.NI,{p:2,id:"company-start",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"What was your start date?"}),(0,r.jsx)(P.II,{fontFamily:"PP Telegraf Light",required:!0,isInvalid:te.companyStart&&(!Q.companyStart||!q.companyStart),errorBorderColor:"red.300",name:"companyStart",defaultValue:Q.companyStart||"",onChange:ie}),te.companyStart&&(!Q.companyStart||!q.companyStart)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:te.companyStart})]}),(0,r.jsxs)(S.NI,{p:2,id:"company-end",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"What was your end date?"}),(0,r.jsx)(P.II,{fontFamily:"PP Telegraf Light",required:!0,isInvalid:te.companyEnd&&(!Q.companyEnd||!q.companyEnd),errorBorderColor:"red.300",name:"companyEnd",defaultValue:Q.companyEnd||"",onChange:ie}),te.companyEnd&&(!Q.companyEnd||!q.companyEnd)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:te.companyEnd}),te.companyName&&(!Q.companyName||!q.companyName)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:te.companyName})]}),(0,r.jsxs)(S.NI,{p:2,id:"company-func",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"Functional expertise"}),(0,r.jsx)(E.Ph,{required:!0,fontFamily:"PP Telegraf Light",defaultValue:Q.companyFunc,errorBorderColor:"red.300",placeholder:"Select functional expertise",name:"companyFunc",onChange:ie,children:D.y.map((function(e,n){return(0,r.jsx)("option",{children:e},"&{item}--".concat(n))}))})]}),(0,r.jsxs)(S.NI,{p:2,id:"company-industry",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontWeight:"400",fontFamily:"PP Telegraf",children:"Industry"}),(0,r.jsx)(E.Ph,{required:!0,fontFamily:"PP Telegraf Light",defaultValue:Q.companyIndustry,errorBorderColor:"red.300",placeholder:"Select industry expertise",name:"companyIndustry",onChange:ie,children:O.T.map((function(e,n){return(0,r.jsx)("option",{children:e},"&{item}--".concat(n))}))})]})]}):null}),(0,r.jsx)(g.mz,{children:(0,r.jsxs)(I.zx,{isDisabled:Y,onClick:function(){!function(){ae.apply(this,arguments)}()},variant:"ghost",backgroundColor:"#C7F83C",color:"#0A1313",fontFamily:"PP Telegraf Bold",fontWeight:"700",children:["Save",j?(0,r.jsx)(k.D8,{size:"22px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"}):null]})})]})})]},"companymodal--".concat(e.currCompany))})};function q(e){var n=e.createWorkElements,t=e.viewCompany,o=e.isCompanyModalOpen,i=e.onCompanyModalClose,l=e.currCompany,s=e.userData,c=e.setUserData,u=e.handleUpdatedCompanyInfo,p=n(6),d=[];return p.forEach((function(e){"edit"!=e.props.to&&d.push(e)})),(0,r.jsxs)(a.xu,{w:"full",overflow:"hidden",children:[(0,r.jsx)(a.xv,{pb:4,pt:5,fontSize:"32px",lineHeight:"48px",letterSpacing:"wide",fontFamily:"GrandSlang",children:"Work Experience"}),(0,r.jsx)(h,{to:"edit",fallback:A(d),children:(0,r.jsx)(a.Ug,{maxW:"640px",children:p})}),(0,r.jsx)(h,{to:"edit",fallback:t,children:(0,r.jsx)(L,{isOpen:o,onClose:i,currCompany:l,userData:s,setUserData:c,handleUpdatedCompanyInfo:u})})]})}var A=function(e){return(0,r.jsx)(a.Ug,{spacing:4,maxW:"640px",children:e})},M=t(97375),H=t(37374),V=t(79339);function _(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function Y(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){_(o,r,a,i,l,"next",e)}function l(e){_(o,r,a,i,l,"throw",e)}i(void 0)}))}}function X(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){X(e,n,t[n])}))}return e}var G=function(e){var n=(0,u.useRef)(),t=(0,u.useState)(!1),a=t[0],o=t[1],i=(0,u.useState)(e.userData),s=i[0],c=i[1],p=(0,u.useState)({functionalExpertise:e.userData.functionalExpertise,industryExpertise:e.userData.industryExpertise}),d=p[0],f=p[1],m=(0,u.useState)({industryExpertise:null,functionalExpertise:null}),x=(m[0],m[1]);function h(){return(h=Y(l().mark((function n(){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(v(d)),n.next=3,(0,F.$j)();case 3:n.sent&&(o(!0),s.userWallet&&s.userName&&d.functionalExpertise&&d.industryExpertise?(t={userName:s.userName,functionalExpertise:d.functionalExpertise,industryExpertise:d.industryExpertise},y(s.userWallet,t),e.handleUpdatedExperiences(s,!1),e.onClose(),window.location.reload(),f($({},s,{functionalExpertise:d.functionalExpertise,industryExpertise:d.industryExpertise})),c($({},s,{functionalExpertise:d.functionalExpertise,industryExpertise:d.industryExpertise})),o(!1)):console.log("No profile, pls create one..."));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var y=function(){var e=Y(l().mark((function e(n,t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={userWallet:n,attributes:t},e.next=3,fetch("/api/users/updateUser?updateUser=expertise",{method:"PUT",body:JSON.stringify({userData:r})});case 3:console.log("USER expertise UPDATED BRUH");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(e){var n={};return""===e.functionalExpertise&&(n.functionalExpertise="Functional expertise is required"),""===e.industryExpertise&&(n.industryExpertise="Industry expertise is required"),n},j=function(e){e.persist();var n=e.target.name.substring(0,e.target.name.length-1);"functionalExpertise"===n||"industryExpertise"===n?(0,V.y)({evt:e,setValues:f,values:d,userData:s,setUserData:c}):(f((function(n){return $({},n,X({},e.target.name,e.target.value))})),c($({},s,{functionalExpertise:d.functionalExpertise,industryExpertise:d.industryExpertise})))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.u_,{finalFocusRef:n,isOpen:e.isOpen,onClose:e.onClose,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsxs)(g.hz,{backgroundColor:"#041A19",fontFamily:"PP Telegraf Light",children:[(0,r.jsx)(g.xB,{children:"Update your background expertise"}),(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{children:(0,r.jsxs)("form",{style:{alignSelf:"center"},children:[(0,r.jsx)(H.N,{name:"functionalExpertise",formLabel:"Superpowers",handleChange:j,options:D.y,maxSelections:3,defaultValues:d.functionalExpertise||e.userData.functionalExpertise||[]}),(0,r.jsx)(H.N,{name:"industryExpertise",formLabel:"Industry expertise",handleChange:j,defaultValues:d.industryExpertise||e.userData.industryExpertise||[],options:O.T,maxSelections:3})]})}),(0,r.jsx)(g.mz,{children:(0,r.jsxs)(I.zx,{variant:"ghost",backgroundColor:"#C7F83C",color:"#0A1313",fontFamily:"PP Telegraf Bold",fontWeight:"700",onClick:function(){return h.apply(this,arguments)},children:["Save"," ",a?(0,r.jsx)(k.D8,{size:"22px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"}):null]})})]})]})})},Z=t(33441),J=t(95094);function Q(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function K(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Q(o,r,a,i,l,"next",e)}function l(e){Q(o,r,a,i,l,"throw",e)}i(void 0)}))}}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ne=function(e){var n=(0,u.useRef)(),t=(0,u.useState)(!1),o=t[0],i=t[1],s=(0,u.useState)(e.userData),c=s[0],p=s[1],d=(0,u.useState)({firstName:e.userData.firstName,lastName:e.userData.lastName,currTitle:e.userData.currTitle,currLocation:e.userData.currLocation,bio:e.userData.bio,linkedIn:e.userData.linkedIn,twitter:e.userData.twitter,userName:e.userData.userName,email:e.userData.email}),f=d[0],m=d[1],x=(0,u.useState)({firstName:null,lastName:null,currTitle:null,bio:null,linkedIn:null,twitter:null,userName:null,email:null}),h=x[0],y=x[1];function v(){return(v=K(l().mark((function n(){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return y(b(f)),n.next=3,(0,F.$j)();case 3:n.sent&&(i(!0),c.userWallet&&c.userName&&c.firstName&&c.lastName&&c.currTitle?(t={userName:c.userName,firstName:c.firstName,lastName:c.lastName,currTitle:c.currTitle,currLocation:c.currLocation?c.currLocation:null,bio:c.bio?c.bio:null,linkedIn:c.linkedIn?c.linkedIn:null,twitter:c.twitter?c.twitter:null,email:c.email?c.email:null},j(c.userWallet,t),e.handleUpdatedExperiences(c,!1),e.onClose(),window.location.reload(),i(!1)):console.log("No profile, pls create one..."));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var j=function(){var e=K(l().mark((function e(n,t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={userWallet:n,attributes:t},e.next=3,fetch("/api/users/updateUser?updateUser=profile",{method:"PUT",body:JSON.stringify({userData:r})});case 3:console.log("USER profile UPDATED BRUH");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),b=function(e){var n={};e.userName||(n.userName="User name is required"),e.firstName||(n.firstName="First name is required"),e.lastName||(n.lastName="Last name is required"),e.currTitle||(n.currTitle="Current title is required"),e.bio&&e.bio.length>280&&(n.bio="Bio is too long. It should be less than 280 characters.");var t=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/;e.linkedIn&&!t.test(e.linkedIn)&&(n.linkedIn="Please enter a valid URL"),e.twitter&&!t.test(e.twitter)&&(n.twitter="Please enter a valid URL");return e.email||(n.email="Email address is required"),e.email&&!/(.+)@(.+){1,}\.(.+){1,}/.test(e.email)&&(n.email="Email address is invalid"),""===e.functionalExpertise&&(n.functionalExpertise="Functional expertise is required"),""===e.industryExpertise&&(n.industryExpertise="Industry expertise is required"),n},w=function(e){e.persist();var n=e.target.value,t=e.target.name.substring(0,e.target.name.length-1);"functionalExpertise"===t||"industryExpertise"===t?(0,V.y)({evt:e,values:f,setValues:m,userData:c,setUserData:p}):p(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}({},c,ee({},e.target.name,n)))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.u_,{finalFocusRef:n,isOpen:e.isOpen,onClose:e.onClose,children:[(0,r.jsx)(g.ZA,{}),(0,r.jsxs)(g.hz,{backgroundColor:"#041A19",fontFamily:"PP Telegraf Light",children:[(0,r.jsx)(g.xB,{children:"Update your profile"}),(0,r.jsx)(g.ol,{}),(0,r.jsx)(g.fe,{children:(0,r.jsxs)("form",{style:{alignSelf:"center"},children:[(0,r.jsxs)(S.NI,{p:2,id:"first-name",isRequired:!0,children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"First name"}),(0,r.jsx)(P.II,{required:!0,isInvalid:h.firstName&&(!e.userData.firstName||!f.firstName),errorBorderColor:"red.300",placeholder:"First name",name:"firstName",defaultValue:c.firstName||"",onChange:w}),h.firstName&&(!e.userData.firstName||!f.firstName)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.firstName})]}),(0,r.jsxs)(S.NI,{p:2,id:"last-name",isRequired:!0,children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Last name"}),(0,r.jsx)(P.II,{required:!0,isInvalid:h.lastName&&(!e.userData.lastName||!f.lastName),errorBorderColor:"red.300",placeholder:"Last name",name:"lastName",defaultValue:c.lastName||"",onChange:w}),h.lastName&&(!e.userData.lastName||!f.lastName)&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.lastName})]}),(0,r.jsxs)(S.NI,{p:2,id:"current-company-title",isRequired:!0,children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Current title"}),(0,r.jsx)(P.II,{isInvalid:h.currTitle,errorBorderColor:"red.300",defaultValue:f.currTitle||"",required:!0,placeholder:"Current title",name:"currTitle",onChange:w}),h.currTitle&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.currTitle})]}),(0,r.jsxs)(S.NI,{p:2,id:"email",isRequired:!0,children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Email"}),(0,r.jsx)(P.II,{required:!0,isInvalid:h.email&&e.userData.email===f.email,errorBorderColor:"red.300",placeholder:"Email",name:"email",defaultValue:c.email||"",onChange:w}),h.email&&e.userData.email!==f.email&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.email})]}),(0,r.jsxs)(S.NI,{p:2,id:"currLocation",isRequired:!0,children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Where do you call home?"}),(0,r.jsx)(E.Ph,{defaultValue:c.currLocation||"",placeholder:"Select current location",name:"currLocation",onChange:w,children:(0,J.k)()})]}),(0,r.jsxs)(S.NI,{p:2,id:"bio",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Bio"}),(0,r.jsx)(Z.g,{isInvalid:h.bio,errorBorderColor:"red.300",defaultValue:c.bio||"",name:"bio",maxLength:280,onChange:w}),h.bio&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.bio})]}),(0,r.jsxs)(S.NI,{p:2,id:"linkedIn",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"LinkedIn URL"}),(0,r.jsx)(P.II,{isInvalid:h.linkedIn,errorBorderColor:"red.300",name:"linkedIn",defaultValue:c.linkedIn||"",onChange:w}),h.linkedIn&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.linkedIn})]}),(0,r.jsxs)(S.NI,{p:2,id:"twitter",children:[(0,r.jsx)(S.lX,{fontSize:"16px",lineHeight:"24px",fontFamily:"PP Telegraf",children:"Twitter URL"}),(0,r.jsx)(P.II,{isInvalid:h.twitter,errorBorderColor:"red.300",name:"twitter",defaultValue:c.twitter||"",onChange:w}),h.twitter&&(0,r.jsx)(a.xv,{fontSize:"xs",fontWeight:"400",color:"red.500",children:h.twitter})]})]})}),(0,r.jsx)(g.mz,{children:(0,r.jsxs)(I.zx,{variant:"ghost",backgroundColor:"#C7F83C",color:"#0A1313",fontFamily:"PP Telegraf Bold",fontWeight:"700",onClick:function(){return v.apply(this,arguments)},children:["Save"," ",o?(0,r.jsx)(k.D8,{size:"22px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"}):null]})})]})]})})};function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function re(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function ae(e){var n,t,o=e.userData,i=re(e,["userData"]),l=null===(n=o.twitter)||void 0===n?void 0:n.toLowerCase().split(/(twitter\.com)/),c=null===(t=o.linkedIn)||void 0===t?void 0:t.toLowerCase().split(/(linkedin\.com)/);return(0,r.jsxs)(a.Ug,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){te(e,n,t[n])}))}return e}({width:"6rem"},i,{children:[o.linkedIn&&(0,r.jsx)(a.rU,{href:"https://linkedin.com".concat(c[2])||0,target:"_blank",rel:"noopener noreferrer",width:"fit-content",children:(0,r.jsx)(s.Ee,{src:"twali-assets/linkedLogo.png",height:"32px",width:"auto"})}),o.twitter&&(0,r.jsx)(a.rU,{href:"https://twitter.com".concat(l[2])||0,target:"_blank",rel:"noopener noreferrer",marginLeft:o.linkedIn?"16px !important":"initial",children:(0,r.jsx)(s.Ee,{src:"twali-assets/twitterLogo.png",height:"32px",width:"auto"})})]}))}function oe(e){var n=e.onExpModalOpen,t=e.isExpModalOpen,o=e.onExpModalClose,i=e.userData,l=e.setUserData,c=e.handleUpdatedExperiences,u=e.handleUpdatedProfile,p=(0,M.qY)(),d=p.isOpen,f=p.onOpen,m=p.onClose;return(0,r.jsxs)(a.gC,{marginTop:0,padding:0,my:0,p:["0","0","0","0 2%","0 2% 0 1.5% "],align:"flex-start",justifyContent:"center",borderRight:"1px solid #587070",width:"73vw",maxW:"565px",mx:"auto",children:[(0,r.jsxs)(a.kC,{width:"100%",flexDir:"row",marginBottom:"24px",alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(a.xv,{fontSize:"40px",marginTop:"52px",color:"#C7F83C",lineHeight:"56px",letterSpacing:"wide",fontFamily:"GrandSlang",textTransform:"capitalize",children:i.currTitle}),(0,r.jsxs)(h,{to:"edit",children:[(0,r.jsx)(I.zx,{onClick:n,alignSelf:"flex-end",variant:"ghost","aria-label":"Update experience",margin:"0px",mx:"0px",pos:"relative",top:"-45px !important",left:"16px",children:(0,r.jsx)(s.Ei,{width:"20px",height:"20px",src:"twali-assets/editicon.png"})}),(0,r.jsx)(ne,{isOpen:t,onClose:o,userData:i,setUserData:l,handleUpdatedExperiences:u})]})]}),(0,r.jsxs)(a.Ug,{marginTop:10,marginBottom:0,children:[(0,r.jsx)(a.xv,{color:"#C7F83C",fontSize:"18px",fontWeight:"400",lineHeight:"28px",fontFamily:"PP Telegraf",children:"Lives in"}),(0,r.jsx)(a.xv,{fontSize:"18px",lineHeight:"28px",fontWeight:"400",letterSpacing:"wide",fontFamily:"PP Telegraf Light",children:i.currLocation})]}),(0,r.jsxs)(a.xu,{marginTop:"8px !important",children:[(0,r.jsx)(a.xv,{color:"#C7F83C",fontSize:"18px",fontWeight:"400",lineHeight:"28px",mb:"16px",fontFamily:"PP Telegraf",children:"Bio"}),(0,r.jsx)(a.xv,{fontSize:"16px",fontWeight:"400",lineHeight:"24px",maxW:"496px",fontFamily:"PP Telegraf Light",children:i.bio})]}),(0,r.jsx)(ae,{userData:i,marginTop:"24px !important"}),(0,r.jsxs)(a.kC,{p:6,mx:"auto",width:"100%",minHeight:"248px",flexDir:"column",maxWidth:"486px",textAlign:"start",backgroundColor:"#0A2625",marginTop:"52px !important",justifyContent:"space-between",marginBottom:"80px !important",borderRadius:"16px 16px 16px 16px",children:[(0,r.jsxs)(a.gC,{color:"#F9FFF2",fontSize:"18px",fontWeight:"400",lineHeight:"28px",backgroundColor:"#0A2625",fontFamily:"PP Telegraf Light",borderRadius:"16px 16px 16px 16px",children:[(0,r.jsxs)(a.Ug,{width:"100%",justifyContent:"space-between",height:"fit-content",children:[(0,r.jsx)(a.xv,{fontFamily:"PP Telegraf",children:"Superpowers"}),(0,r.jsxs)(h,{to:"edit",children:[(0,r.jsx)(I.zx,{onClick:f,alignSelf:"flex-end",variant:"ghost","aria-label":"Update experience",pos:"relative",width:"fit-content",p:0,top:-4,left:"16px",children:(0,r.jsx)(s.Ei,{width:"20px",height:"20px",src:"twali-assets/editicon.png"})}),(0,r.jsx)(G,{isOpen:d,onClose:m,userData:i,setUserData:l,handleUpdatedExperiences:c})]})]}),(0,r.jsx)(a.kC,{flexDir:"row",width:"100%",justifyContent:"flex-start",m:0,flexFlow:"wrap",children:i&&i&&i.functionalExpertise&&"object"===typeof(null===i||void 0===i?void 0:i.functionalExpertise)&&(null===i||void 0===i?void 0:i.functionalExpertise.map((function(e,n){if(e)return(0,r.jsx)(C,{text:e,marginRight:2===n?0:4,marginBottom:4},"chip--".concat(e,"-").concat(n))})))})]}),(0,r.jsxs)(a.gC,{color:"#F9FFF2",fontSize:"18px",fontWeight:"400",lineHeight:"28px",backgroundColor:"#0A2625",fontFamily:"PP Telegraf Light",borderRadius:"16px 16px 16px 16px",children:[(0,r.jsx)(a.Ug,{width:"100%",justifyContent:"space-between",height:"40px",children:(0,r.jsx)(a.xv,{alignSelf:"start",fontFamily:"PP Telegraf",pb:0,children:"Industries"})}),(0,r.jsx)(a.kC,{m:0,px:0,width:"100%",flexDir:"row",flexFlow:"wrap",justifyContent:"flex-start",children:i&&i&&i.industryExpertise&&"object"===typeof(null===i||void 0===i?void 0:i.industryExpertise)&&(null===i||void 0===i?void 0:i.industryExpertise.map((function(e,n){if(e)return(0,r.jsx)(a.xu,{borderRadius:"32px",backgroundImage:"linear-gradient(#0DD5D1 0%, #9350B3 100%)",p:"1px",marginRight:2===n?0:4,marginBottom:4,children:(0,r.jsx)(a.xv,{fontSize:"14px",lineHeight:"24px",fontFamily:"PP Telegraf",alignSelf:"start",backgroundColor:"#0A2625",p:"4px 12px",whiteSpace:"nowrap",borderRadius:"32px",children:e})},n)})))})]})]})]})}var ie=t(6886),le=t(9669),se=t.n(le);function ce(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){ce(o,r,a,i,l,"next",e)}function l(e){ce(o,r,a,i,l,"throw",e)}i(void 0)}))}}function pe(e){var n=e.uuid,t=(0,u.useState)({name:"",size:null,type:""}),o=t[0],i=t[1],c=(0,u.useState)(!1),p=c[0],d=c[1],f=(0,u.useState)(!1),m=f[0],x=f[1],g=(0,u.useState)(Date.now()),y=g[0],v=g[1],j=(0,u.useState)(!1),b=j[0],w=j[1],C=(0,u.useRef)(null),S=(0,u.useState)(""),E=S[0],N=S[1],F=function(){var e=ue(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/getImage?uuid=".concat(n),{method:"GET"}).then((function(e){return e.json()})).then((function(e){N(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("No previous image found");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){F()}),[""==E]);var D=function(){var e=ue(l().mark((function e(t){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),r=encodeURIComponent(t.name),a=new FormData,t.filename=r,a.append("file",t),a.append("uuid",n),se().request({method:"post",url:"/api/users/postImage",data:a,onUploadProgress:function(e){}}).then((function(e){v(Date.now()),O(e)}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(e){e?(T(),setTimeout((function(){x(!1),d(!1),window.location.reload()}),5e3)):(console.log("error"),x(!1))},T=function(){var e=ue(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/getImage?uuid=".concat(n),{method:"GET"}).then((function(e){return e.json()})).then((function(e){N(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=(0,r.jsx)(r.Fragment,{children:E?(0,r.jsx)(a.xu,{height:"160px",width:"160px",alignSelf:"center",overflow:"hidden",pos:"relative",bottom:5,marginBottom:0,p:0,borderRadius:"0.375rem",children:(0,r.jsx)(s.Ei,{src:"data:image/jpeg;base64,".concat(E),alt:"".concat(E)},"".concat(E,"--view-profile-img"))}):null});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h,{to:"edit",fallback:z,children:[(0,r.jsx)(P.II,{type:"file",name:"profilePhoto",visibility:"hidden",onChange:function(e){var n=e.target.files[0];Math.round(n.size/1024)>=1024?w(!0):(i(n),d(!0),w(!1)),console.log(n)},ref:C}),(0,r.jsx)(I.zx,{name:"file",height:"160px",width:"160px",alignSelf:"center",overflow:"hidden",pos:"relative",bottom:5,marginBottom:0,p:0,onClick:function(){C.current&&C.current.click()},children:E?(0,r.jsx)(s.Ei,{src:"data:image/jpeg;base64,".concat(E),alt:"".concat(E)},y):(0,r.jsx)(s.Ei,{borderRadius:"full",width:"80px",height:"80px",src:"twali-assets/plusicon.png",alt:"plus icon"})}),o&&o.name?(0,r.jsx)(a.xv,{fontFamily:"PP Telegraf",fontSize:"14px",lineHeight:"24px",fontWeight:"400",pos:"relative",children:o.name}):null,b?(0,r.jsxs)(ie.bZ,{width:500,status:"error",children:[(0,r.jsx)(ie.zM,{}),(0,r.jsx)(a.xv,{fontFamily:"PP Telegraf",fontSize:"14px",lineHeight:"24px",fontWeight:"400",pos:"relative",children:"Oops! Your image is too big. Please upload again! (less than 1MB)"})]}):null,p&&(0,r.jsxs)(I.zx,{onClick:function(e){return function(e){e.preventDefault(),o&&D(o)}(e)},children:["save ",m?(0,r.jsx)(k.D8,{size:"22px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"}):null]})]},"".concat(y,"--usr-permission"))})}function de(e){var n=e.userName,t=e.uuid;return(0,r.jsxs)(a.gC,{w:"100%",display:"flex",height:"440px",bgSize:"cover",justifyContent:"center",overflow:"hidden",bgRepeat:"no-repeat",backgroundImage:"twali-assets/bannerimage.png",children:[(0,r.jsx)(pe,{uuid:t}),n&&(0,r.jsx)(a.xv,{fontFamily:"GrandSlang",fontSize:"64px",lineHeight:"80px",letterSpacing:"wide",pos:"relative",top:"5px",children:n}),(0,r.jsx)(a.xv,{fontFamily:"PP Telegraf",fontSize:"16px",lineHeight:"24px",fontWeight:"400",letterSpacing:"wide",textTransform:"uppercase",pos:"relative",top:"16px",visibility:"hidden",children:"available to work"})]})}var fe=t(28687);function me(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}var xe=function(e){var n=e.fetchPermission,t=e.children,a={},o=function(){var e,t=(e=l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.keys(a).includes(t)){e.next=2;break}return e.abrupt("return",a[t]);case 2:return e.next=4,n(t);case 4:return r=e.sent,a[t]=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){me(o,r,a,i,l,"next",e)}function l(e){me(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,r.jsx)(d.Provider,{value:{isAllowedTo:o},children:t})},he=t(43990),ge=t(94429),ye=function(e){var n,t,o;return(0,r.jsx)(r.Fragment,{children:(null===(n=e.company)||void 0===n||null===(t=n.logo)||void 0===t||null===(o=t.message)||void 0===o?void 0:o.logo)?(0,r.jsxs)(a.xu,{w:"80px",height:"80px",display:"flex",borderRadius:"full",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(222,222,222)",overflow:"hidden",p:0,marginLeft:0===e.currCompany?"0px":"32px !important",children:[(0,r.jsx)(h,{to:"view",children:(0,r.jsx)(s.Ei,{bgSize:"contain",style:{cursor:"pointer"},alignSelf:"center",src:e.company.logo.message.logo,alt:e.companyName,onClick:function(){e.setCurrCompany(e.currCompany),e.onCompanyModalOpen()}},"".concat(e.companyName,"--").concat(e.currCompany))}),(0,r.jsx)(h,{to:"edit",children:(0,r.jsx)(s.Ei,{backgroundColor:"rgb(222, 222, 222)",style:{cursor:"pointer"},alignSelf:"center",src:e.company.logo.message.logo,alt:e.companyName,onMouseEnter:function(e){return e.currentTarget.src="edit.svg"},onMouseLeave:function(n){return n.currentTarget.src=e.company.logo.message.logo},onClick:function(){e.setCurrCompany(e.currCompany),e.onCompanyModalOpen()}},"".concat(e.companyName,"--").concat(e.currCompany))})]},"".concat(e.companyName,"--").concat(e.currCompany,"--box")):(0,r.jsxs)(a.xu,{w:"80px",height:"80px",borderRadius:"full",backgroundColor:"rgb(222, 222, 222)",marginLeft:0!==e.currCompany&&e.currCompany?"32px !important":"0px",bgGradient:"linear-gradient(136.3deg, #0DD5D1 -3.88%, #9350B3 84.78%)",overflow:"hidden",p:0,onMouseEnter:function(e){var n=e.currentTarget.children[0],t=e.currentTarget.children[1];n.style.display="flex",t.style.display="none"},onMouseLeave:function(e){var n=e.currentTarget.children[0],t=e.currentTarget.children[1];n.style.display="none",t.style.display="flex"},onClick:function(){e.setCurrCompany(e.currCompany),e.onCompanyModalOpen()},children:[(0,r.jsx)(s.Ei,{backgroundColor:"rgb(222, 222, 222)",bgGradient:"linear-gradient(136.3deg, #0DD5D1 -3.88%, #9350B3 84.78%)",borderRadius:"full",style:{cursor:"pointer"},alignSelf:"center",src:"edit.svg",alt:"edit stock img",display:"none"},"".concat(e.companyName,"--").concat(e.currCompany)),(0,r.jsx)(a.xv,{w:"full",h:"full",fontSize:"4xl",fontWeight:"400",display:"flex",color:"#F9FFF2",justifyContent:"center",alignItems:"center",fontFamily:"GrandSlang",children:e.companyName[0].toUpperCase()})]},"".concat(e.companyName,"--").concat(e.currCompany,"--box"))})};function ve(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function je(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){ve(o,r,a,i,l,"next",e)}function l(e){ve(o,r,a,i,l,"throw",e)}i(void 0)}))}}function be(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){be(e,n,t[n])}))}return e}function Ce(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Se(){var e=Ce(["\n        query getSnapshotVotes($wallet: String!) {\n          votes(where: { voter: $wallet }) {\n            id\n            space {\n              id\n              avatar\n            }\n          }\n        }\n      "]);return Se=function(){return e},e}function Pe(){var e=Ce(["\n            query getProposals($spaceID: String!) {\n              proposals(where: { space: $spaceID }) {\n                title\n                scores\n                scores_total\n                votes\n              }\n            }\n          "]);return Pe=function(){return e},e}function Ee(){var e=Ce(["\n            query getVotes($spaceID: String!, $wallet: String!) {\n              votes(where: { voter: $wallet, space: $spaceID }) {\n                id\n              }\n            }\n          "]);return Ee=function(){return e},e}var Ie=function(e){var n=e.user,t=(0,o.useRouter)();if(t.isFallback)return(0,r.jsx)(he.default,{loaded:t.isFallback});var i=(0,u.useState)(),c=i[0],p=i[1],d=(0,M.qY)(),f=d.isOpen,m=d.onOpen,x=d.onClose,g=(0,M.qY)(),y=g.isOpen,j=g.onOpen,b=g.onClose,w=(0,M.qY)(),C=w.isOpen,S=w.onOpen,P=w.onClose,E=(0,u.useState)(!1),I=E[0],k=E[1],N=(0,u.useState)(!1),D=N[0],O=N[1],T=(0,u.useState)(),z=T[0],W=T[1],U=(0,u.useState)(),B=U[0],R=U[1],A=(0,u.useState)(),H=A[0],V=A[1],_=(0,u.useState)(""),Y=_[0],X=_[1],$=(0,u.useState)(0),G=$[0],Z=$[1];function Q(){return K.apply(this,arguments)}function K(){return(K=je(l().mark((function e(){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"public"==(null===(r=t.query)||void 0===r?void 0:r.view)){e.next=9;break}return e.next=5,(0,F.$j)();case 5:(a=e.sent)&&X(a),e.next=10;break;case 9:O(!0);case 10:n&&n.userWallet&&(O(!1),p(n),k(!0)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error: ",e.t0),k(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}(0,u.useEffect)((function(){O(D)}),[D]),(0,u.useEffect)((function(){var e=function(e){var n=(0,fe.gql)(Se()),t={wallet:e};(0,fe.request)("https://hub.snapshot.org/graphql",n,t).then((function(n){n.votes.find((function(e){e.space.avatar&&(e.space.avatar=e.space.avatar.replace("ipfs://","https://ipfs.io/ipfs/"))})),function(e,n){o.apply(this,arguments)}(n,e)}))},r=function(e){fetch("https://api.poap.xyz/actions/scan/".concat(e)).then((function(e){return e.json()})).then((function(e){R(e)}))};function a(){return(a=je(l().mark((function a(){var o,i;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"public"==(null===(o=t.query)||void 0===o?void 0:o.view)){a.next=9;break}return a.next=5,(0,F.$j)();case 5:(i=a.sent)&&X(i),a.next=10;break;case 9:O(!0);case 10:n&&n.userWallet&&(p(n),k(!0),e(n.userWallet),r(n.userWallet)),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),console.log("error: ",a.t0),k(!1);case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))).apply(this,arguments)}function o(){return(o=je(l().mark((function e(n,t){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n&&n.votes.forEach((function(e){var n={spaceID:"",totalVotes:0,walletVotes:0,voter:"",avatar:e.space.avatar},a={spaceID:e.space.id,wallet:t},o=(0,fe.gql)(Pe());(0,fe.request)("https://hub.snapshot.org/graphql",o,a).then((function(e){var t=0;e.proposals.forEach((function(e){t+=e.votes})),n.totalVotes=t}));var i=(0,fe.gql)(Ee());(0,fe.request)("https://hub.snapshot.org/graphql",i,a).then((function(e){n.walletVotes=e.votes.length,n.voter=t})),n.spaceID=e.space.id,r.push(n)})),a=[],r.forEach((function(e){a.findIndex((function(n){return n.spaceID==e.spaceID}))<=-1&&a.push(e)})),W(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]);var ee=function(e){p(we({},e)),Q()},ne=function(e){p(we({},e)),Q()},te=(0,r.jsx)(L,{isOpen:C,onClose:P,currCompany:G,userData:c,setUserData:p,userPermission:"view",handleUpdatedCompanyInfo:ne});return(0,r.jsx)(r.Fragment,{children:I?c&&c.userName&&c.userWallet&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge.Z,{whichPage:"profile",isConnectWalletBtn:D,userPage:c,userWallet:Y}),(0,r.jsxs)(a.W2,{maxW:"100%",p:0,marginTop:"0 !important",backgroundColor:"#0A1313",children:[(0,r.jsxs)(xe,{fetchPermission:(0,J.I)(c.userName,Y||null),children:[(0,r.jsx)(de,{userName:c.userName,uuid:c.uuid}),(0,r.jsxs)(a.kC,{w:"full",justifyContent:"space-around",margin:"auto",maxW:"1350px",children:[(0,r.jsx)(oe,{onExpModalOpen:m,isExpModalOpen:f,onExpModalClose:x,userData:c,setUserData:p,handleUpdatedExperiences:ee,handleUpdatedProfile:ee}),(0,r.jsx)(a.xu,{alignSelf:"flex-start",w:"full",overflow:"hidden",children:(0,r.jsxs)(a.gC,{pt:"60px",pl:"12.5%",children:[(0,r.jsx)(v,{poapsData:B,snapshotData:z,setCurrentBadge:V,onBadgesModalOpen:j,isBadgesModalOpen:y,onBadgesModalClose:b,currentBadge:H}),(0,r.jsx)(q,{createWorkElements:function(e){for(var n=function(e){c.companyInfo&&e<a&&c.companyInfo[e]&&c.companyInfo[e].companyName?t.push((0,r.jsx)(ye,{company:c.companyInfo[e],companyName:c.companyInfo[e].companyName,currCompany:e,setCurrCompany:Z,onCompanyModalOpen:S},"".concat(e,"--company-info"))):t.push((0,r.jsx)(h,{to:"edit",children:(0,r.jsx)(s.Ei,{marginLeft:0===e?"0px":"32px !important",borderRadius:"full",style:{cursor:"pointer"},backgroundColor:"transparent",width:"80px",src:"twali-assets/plusicon.png",alt:"add img",onClick:function(){Z(e),S()}})},"".concat(e,"--empty-company-usr-permission")))},t=[],a=c.companyInfo?c.companyInfo.length:0,o=0;o<e;o++)n(o);return t},viewCompany:te,isCompanyModalOpen:C,onCompanyModalClose:P,currCompany:G,userData:c,setUserData:p,handleUpdatedCompanyInfo:ne})]})})]})]}),(0,r.jsx)(a.xu,{height:"80px",borderTop:"1px solid #587070"})]})]}):(0,r.jsx)(he.default,{loaded:!I})})};function ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ne(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ke(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ke(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fe=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return fetch.apply(void 0,Ne(n)).then((function(e){return e.json()}))},De=function(){var e,n=(0,o.useRouter)().query;if("undefined"!==n.userName){var t=(0,N.ZP)("/api/users/".concat(n.userName),Fe),i=t.data;t.error;e=i}return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("title",{children:["twali.xyz - ",e.userName]}),(0,r.jsx)(a.kC,{h:"full",children:(0,r.jsx)(a.gC,{w:"full",h:"full",spacing:8,alignItems:"flex-start",children:(0,r.jsx)(Ie,{user:e})})})]}):(0,r.jsx)(he.default,{loaded:!e})}},43990:function(e,n,t){"use strict";t.r(n);var r=t(34051),a=t.n(r),o=t(85893),i=t(68527),l=t(34651),s=t(38152),c=t(15193),u=t(68729),p=t(94429),d=t(67294),f=t(11163),m=t(3283),x=t.n(m),h=t(42484),g=t.n(h),y=t(64488),v=t(67679);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(e){(0,d.useEffect)((function(){C(!e.loaded)}),[]);var n=(0,d.useState)(!1),t=(n[0],n[1],w(d.useState(!1),2)),r=t[0],m=t[1],h=(0,d.useState)(!1),j=h[0],C=h[1],S=(0,f.useRouter)(),P=function(){var e,n=(e=a().mark((function e(){var n,t,r,o,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new(g())({disableInjectedProvider:!1,network:"rinkeby",cacheProvider:!1,providerOptions:{walletconnect:{package:y.Z,options:{rpc:{1:"https://eth-rinkeby.alchemyapi.io/v2/QtLM8rW9nB6DobDu8KQx-7fYMS2rBlky"}}}}}),e.next=3,n.connect();case 3:return t=e.sent,r=new(x())(t),e.next=7,r.eth.getAccounts();case 7:return o=e.sent,i=o[0],m(!0),e.prev=10,e.next=13,(0,v.GO)(i);case 13:(l=e.sent)&&l.userName&&l.userWallet?(S.push("/".concat(l.userName)),m(!1)):(console.log("No profile, pls create one..."),S.push("/steps")),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(10),console.log("error: ",e.t0),S.push("/steps"),C(!0);case 22:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){b(o,r,a,i,l,"next",e)}function l(e){b(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("title",{children:"twali.xyz - login"}),(0,o.jsxs)(i.W2,{width:"100%",height:"1024px",minH:"100vh",maxW:"100%",pos:"relative",bgSize:"cover",bgPosition:"center",bgImg:"url(".concat(u.Z.src,")"),children:[(0,o.jsx)(p.Z,{whichPage:"index"}),(0,o.jsxs)(i.gC,{width:"100%",minH:"100vh",maxW:"100%",pos:"absolute",right:"1.9%",bottom:"4.5%",display:"flex",flexDir:"column",alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(i.xv,{alignSelf:"center",fontFamily:"GrandSlang",fontSize:"40px",lineHeight:"56px",letterSpacing:"wide",children:"welcome to"}),(0,o.jsx)(l.Ei,{src:"twali-assets/twali_rainbow.png",width:"300px",height:"64.38px",marginTop:"49px !important"}),j?(0,o.jsxs)(c.zx,{marginTop:"96px !important",width:"207px",height:"52px",color:"#062B2A",backgroundColor:"#C7F83C",onClick:P,children:["Connect Wallet"," ",r?(0,o.jsx)(s.D8,{size:"22px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"}):null]}):(0,o.jsx)(s.D8,{marginTop:"109px !important",size:"32px",thickness:"4px",isIndeterminate:!0,color:"#3C2E26"})]})]})]})}}},function(e){e.O(0,[482,714,277,944,781,815,612,540,526,861,774,888,179],(function(){return n=54444,e(e.s=n);var n}));var n=e.O();_N_E=n}]);